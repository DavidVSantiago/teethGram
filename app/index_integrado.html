<!DOCTYPE html>
<html lang="pt-br">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>TeethGram</title>
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css"
      integrity="sha512-DTOQO9RWCH3ppGqcWaEA1BIZOC6xxalwEsw9c2QQeAIftl+Vegovlnee1c9QX4TctnWMn13TZye+giMm8e2LwA=="
      crossorigin="anonymous"
      referrerpolicy="no-referrer"
    />
  <script src="https://cdn.jsdelivr.net/npm/html2canvas@1.4.1/dist/html2canvas.min.js"></script>
  <style>
    @import url(https://fonts.googleapis.com/css2?family=League+Gothic&display=swap);*{margin:0;padding:0;box-sizing:border-box}body{display:flex;flex-direction:column;min-height:100vh;font-family:'Segoe UI',Tahoma,Geneva,Verdana,sans-serif;font-size:16px;line-height:1.5;color:#333}h1,h2{font-size:32px;margin:0}h4{font-size:22px;margin:0}p{font-size:16px;margin-bottom:16px}a{color:#000;text-decoration:none}a:hover{text-decoration:underline}span{font-size:16px;font-weight:500}button{font-size:16px;font-weight:500;text-align:center;cursor:pointer}.header-buttons{display:flex;align-items:center;justify-content:center;flex-wrap:wrap;gap:16px;width:100%;padding:16px;margin-top:20px}.btn-primary{width:100%;max-width:270px;font-weight:600;padding:14px;margin-left:10px;margin-right:10px;border:none;border-radius:5px;color:var(--var-cor3);background:var(--var-cor1);box-shadow:rgb(0 0 0 / .35) 0 5px 15px}.btn-hover-header:hover{box-shadow:rgb(0 0 0 / .35) 0 5px 15px;background-color:var(--var-cor7);color:var(--var-cor1)}.form-buttons{padding:16px;margin:16px auto;display:flex;justify-content:center}.btn-secondary{width:100%;max-width:320px;padding:14px;border:none;border-radius:5px;color:var(--var-cor1);background-color:var(--var-cor3)}.btn-hover-form:hover{box-shadow:rgb(0 0 0 / .35) 0 5px 15px;background-color:var(--var-cor4);color:var(--var-cor1)}.form-input{width:100%;padding:5px;text-align:start;outline:none;border-radius:5px;border:2px solid var(--var-cor5);color:var(--var-cor5);background-color:#fff0;transition:0.2s ease-in-out}.form-group{display:flex;flex-direction:column;width:100%}.index-entry{display:flex;flex-direction:column;margin:16px 0;width:50%;font-size:16px}.index-entry p{font-weight:bolder;margin-bottom:8px}.container-main button{margin:16px 0}.form-input:focus{border-color:var(--var-cor3)}.input-section{display:grid;grid-template-columns:1fr 2fr;width:100%;height:30px;background-color:var(--var-cor3)}.input-section label{display:flex;align-items:center;justify-content:center;background-color:var(--var-cor3);color:var(--var-cor1);width:100%}.input-section label,input{text-align:center;font-weight:500}.input-section input{width:100%;outline:none;border:none;color:var(--var-cor5);background-color:var(--var-cor1);box-shadow:rgb(0 0 0 / .35) 0 5px 15px}.input-mult{width:100%;justify-self:center;background-color:var(--var-cor3);padding:5px}.title-input-mult{display:flex;align-items:center;justify-content:center;padding:4px;font-size:16px;font-weight:500;color:var(--var-cor1)}.input-block-width{width:100%}.mult-values{display:grid;grid-template-columns:repeat(3,1fr);gap:5px}.value{display:flex;flex-direction:column-reverse;background-color:#0a3481}.value label{display:flex;justify-content:center;align-items:center;color:var(--var-cor1);font-size:16px}.value label,input{text-align:center;width:100%}.value input{border:none;outline:none}input[type="number"]{font-size:16px;padding:4px}header{display:flex;align-items:center;justify-content:center;gap:16px;width:100%;height:auto;padding:16px;border-bottom-left-radius:160px;background:#3a7ffd;background:radial-gradient(circle,#3a7ffd 55%,#538cf5 83%);color:var(--var-cor1);box-shadow:rgb(0 0 0 / .205) 0 4px 12px}.header-content{width:100%;height:100%;padding:16px}.header-content h1{margin:32px 0;font-weight:700;letter-spacing:1px}.header-content p{text-align:justify;line-height:1.5}.header-image{width:60%;height:100%;padding:16px;display:flex;align-items:center;justify-content:center}.header-image img{width:350px;height:350px}main{flex:1 1 0%;max-width:1200px;width:100%;margin:0 auto;padding:32px}.data-section{width:100%;padding:16px;margin:16px auto;border-radius:5px;border-left:2px solid var(--var-cor3);background-color:var(--var-cor2);box-shadow:rgb(0 0 0 / .226) 1.95px 1.95px 2.6px;display:none}.container-main{width:100%;display:flex;align-items:center;justify-content:center;flex-direction:column}.container-section{width:100%;margin:16px auto}.input-container{display:flex;align-items:center;justify-content:center;flex-direction:column;display:none;padding:16px 0}.input-block{display:flex;align-items:center;justify-content:center;flex-direction:row;width:100%;height:auto;padding:16px}.quadrant-form{display:grid;grid-template-columns:1fr 1fr;align-items:center;justify-content:center}.input-block-rl{display:flex;align-items:center;justify-content:center;flex-direction:column;height:auto;gap:16px}.quadrant-rl{display:flex;align-items:center;justify-content:center;flex-direction:column;padding:8px}.quadrant-rl p{margin:16px 0}.quadrant-title{margin-top:16px;padding:16px;font-size:16px;text-align:center}.tooth-classification{margin-left:75%;width:20%}.section-btn-histogram{display:flex;align-items:center;justify-content:center;margin:16px 0}.section-histogram-render-superior,.section-histogram-render-inferior{margin:30px 0}.box-histogram-render{display:none;justify-content:center;align-items:center;flex-direction:column;width:100%;height:auto}.section-to-image{display:flex;align-items:center;justify-content:center;flex-direction:column;width:100%;height:auto;overflow-y:auto}.label-histogram-render{font-size:16px}.box-histogram-btn{display:flex;align-items:center;justify-content:center;width:100%;height:auto;margin-top:12px 0;padding:12px}footer{display:flex;align-items:center;justify-content:center;width:100%;height:40px;background-color:var(--var-cor2);color:var(--var-cor3);box-shadow:0 -1px 1px rgb(0 0 0 / .37)}.error-message{display:flex;align-items:center;justify-content:center;padding:8px;gap:4px}.error-message{display:none;text-align:center;margin-bottom:0}.error-message p{color:red}input[type="number"]::-webkit-inner-spin-button,input[type="number"]::-webkit-outer-spin-button{-webkit-appearance:none;margin:0}.histogram-legend{display:flex;justify-content:center;align-items:start;flex-direction:column;gap:4px;width:100%;padding:8px}.histogram-legend p{font-size:14px}.histogram-legend-section{display:none;align-items:center;justify-content:center;gap:4px}.histogram-legend-section-cpo{display:none;align-items:start;justify-content:center;flex-direction:column;gap:12px}.histogram-legend-text{font-size:12px;font-weight:700;margin-bottom:0}.histogram-legend-box{width:14px;height:14px;border-radius:4px}.histogram-legend-box-cpo{display:flex;align-items:center;justify-content:center;gap:4px}.histogram-legend-box-total,.histogram-legend-box-c{background-color:#000}.histogram-legend-box-p{background-color:#1a1a1a}.histogram-legend-box-o{background-color:#414141}.form-distribuicao{display:flex;align-items:start;justify-content:center;flex-direction:column;width:50%}.box-form-opcao{display:flex;align-items:start;justify-content:start;gap:8px}.form-titulo{font-weight:bolder;margin-bottom:4px}.form-opcao{display:flex;align-items:center;justify-content:start;gap:4px}.form-radio{width:24px;height:16px;cursor:pointer}.form-label-radio{font-size:16px}.box-select-radio{display:flex;align-items:center;justify-content:center;flex-direction:column;gap:8px;width:50%}:root{--var-cor1:#ffffff;--var-cor2:#ebebebc7;--var-cor3:#105dec;--var-cor4:#0c46b3;--var-cor5:#333;--var-cor6:#ff0000;--var-cor7:#9c55ee}@media (max-width:800px){*{margin:0;padding:0;box-sizing:border-box}body{font-family:'Segoe UI',Tahoma,Geneva,Verdana,sans-serif;font-size:1em;line-height:1.5;color:#333}h1,h2,h4{font-size:6vw;margin:0}p{font-size:5vw;margin-bottom:1vw}span{font-size:4vw}}@media (max-width:800px){button{font-size:5vw}.header-buttons{flex-direction:column;flex-wrap:nowrap;gap:4vw;padding:1vw;margin-top:2vw}.btn-primary{margin-left:2vw;margin-right:2vw}.btn-primary,.btn-secondary{max-width:100%;height:15vw;padding:2vw;border-radius:1vw}.form-buttons{max-width:100%;padding:0;margin:3vw auto}.container-main button{margin:1vw 0}.input-container{width:100%}.form-group{justify-content:center;max-width:100%;margin-bottom:.5vw}.index-entry{margin:2vw 0;width:100%}.index-entry p{font-size:5vw;margin-bottom:1vw}.form-input{width:100%;padding:1vw;font-size:5vw;border-radius:1vw;border:.6vw solid var(--var-cor5)}.input-section{width:30vw;height:5vw;margin-bottom:4vw}.input-section label{padding:.5vw;width:10vw}.input-section label{font-size:7vw}.mult-values{grid-template-columns:1fr;gap:2vw}.input-mult{width:30vw;padding:1vw;padding-bottom:2vw}.title-input-mult{padding:1vw;font-size:7vw}.value{padding-right:1vw;flex-direction:row}.value label{width:10vw;font-size:7vw}}@media (max-width:800px){input[type="number"]{font-size:7vw;padding:0}header{flex-direction:column-reverse;padding:2vw;max-width:100vw;height:auto;gap:1vw;border-bottom-left-radius:20vw;margin-bottom:1vw}.header-content{display:flex;justify-content:center;align-items:center;flex-direction:column;width:95vw;height:auto;padding:2vw;margin-bottom:4vw}.header-content h1{margin:1.5vw 0}.header-image{width:100vw;height:auto;padding:1vw;margin-bottom:2vw}.header-image img{width:50vw;height:auto}main{max-width:100vw;padding:2vw}.data-section{max-width:100vw;padding:2vw;margin:2vw auto;border-radius:2vw;border-left:1vw solid var(--var-cor3)}.container-section{max-width:100%;margin:1vw auto;padding:1vw}.container-main{width:100%;align-items:start}.input-container{padding:4vw 0}.input-block{gap:5vw;width:90vw;padding:.5vw;margin-bottom:1vw}.form-radio{width:5vw;height:5vw}.form-label-radio{font-size:5vw}.quadrant-form{grid-template-columns:1fr;margin-bottom:5vw}.input-block-rl{gap:5vw;margin-bottom:2vw}.quadrant-rl{padding:.5vw}.quadrant-rl p{margin:2vw 0}.quadrant-title{margin-top:4vw;padding:4vw;font-size:4vw;text-align:center}.section-btn-histogram{margin:2vw 0}.tooth-classification{margin:5vw 0;width:100%}.label-histogram-render{font-size:clamp(12px, 1.5vw, 16px)}.box-histogram-btn{display:flex;align-items:center;justify-content:center;width:100%;height:auto;margin-top:3vw 0;padding:3vw}.box-select-radio{width:100%;margin:3vw 0}.form-distribuicao{width:100%}footer{width:100vw;height:10vw;margin-top:5vw;font-size:4vw}}body{display:flex;align-items:center;justify-content:center;flex-direction:column}.container{display:grid;grid-template-columns:0.1fr 0.9fr;grid-template-rows:0.1fr 0.8fr 0.1fr;grid-template-areas:"x y" "a b" "c d";gap:8px;width:100%;height:100%;font-size:12px;font-family:"League Gothic",sans-serif;& .area-x{grid-area:x;width:100%;height:100%}& .area-y{grid-area:y;width:100%;height:100%;display:grid;gap:4px;& .caption-bar{display:flex;align-items:center;justify-content:end;flex-direction:column;gap:4px;& .legendaC,.legendaO,.legendaP,.legendaTotal{width:100%;text-align:center;padding:4px 0;color:#fff;border-radius:4px;font-size:12px;font-weight:400}& .legendaC{background-color:#000}& .legendaP{background-color:#1a1a1a}& .legendaO{background-color:#414141}& .legendaTotal{background-color:#000}}}& .area-a{grid-area:a;width:100%;height:100%;& .side-bar{display:flex;height:100%;gap:4px;& .rule-text{display:flex;align-items:center;justify-content:center;transform:rotate(-0.25turn);& p{font-size:14px;font-weight:400}}& .rule-bar{display:flex;justify-content:space-between;align-items:end;flex-direction:column;border-right:2px solid #000;& .rule-bar-item{font-size:12px;font-weight:400}}}}& .area-b{grid-area:b;width:100%;height:100%;& .data-content{display:grid;width:100%;height:100%;gap:4px;border-bottom:2px solid #636363;& .bar{display:flex;align-items:end;justify-content:center;width:100%;height:100%;& .value-bar{display:flex;justify-content:end;align-items:center;flex-direction:column;width:100%;background-color:#000}& .value-bar-multi{display:flex;justify-content:end;align-items:center;flex-direction:column;width:100%;& .valueC{width:100%;background-color:#000}& .valueP{width:100%;background-color:#1a1a1a}& .valueO{width:100%;background-color:#414141}}}}}& .area-c{grid-area:c;width:100%;height:100%}& .area-d{grid-area:d;width:100%;height:100%;& .label-content{display:grid;width:100%;height:100%;gap:4px;& .bar-label{display:flex;align-items:start;justify-content:center;font-size:12px;font-weight:400}}}}.inverted-container{grid-template-columns:0.1fr 0.9fr;grid-template-rows:0.1fr 0.8fr 0.1fr;grid-template-areas:"c d" "a b" "x y";& .area-y{& .caption-bar{flex-direction:column-reverse}}& .area-a{& .side-bar{& .inverted-rule-bar{flex-direction:column-reverse}}}& .area-b{& .data-content{border-bottom:none;border-top:2px solid #636363;& .bar{align-items:start;justify-content:start;& .value-bar-multi{display:flex;justify-content:start;align-items:start;flex-direction:column-reverse}}}}& .area-d{& .label-content{& .bar-label{align-items:end}}}}
  </style>
  </head>
  <body>
    <!--HEADER-->
    <header>
      <div class="header-content">
        <h1>TeethGram</h1>
        <p>
          Ferramenta voltada para o auxílio de pesquisadores e gestores em saúde
          bucal para distribuir os componentes da experiência de cárie dentária
          por elementos dentários de forma ilustrativa.
        </p>

        <div class="header-buttons">
          <button id="permanent-teeth" class="btn-primary btn-hover-header">
            Dentes Permanentes (CPO-D)
          </button>
          <button id="deciduous-teeth" class="btn-primary btn-hover-header">
            Dentes Decíduos (ceo-d)
          </button>
        </div>
      </div>
      <div class="header-image">
        <img src="img/img3.png" alt="imagem 3d" />
      </div>
    </header>
    <!--HEADER-->

    <!--MAIN-->
    <main>
      <!--Seção Data-->
      <section id="data-section" class="data-section">
        <div class="container-main">
          <h2 id="section-title"></h2>
          <!--Seção form informações-->

          <div class="box-select-radio">
            <div class="index-entry">
              <p class="form-label">Índice</p>
              <select class="form-input" name="index-entry" id="index-entry">
                <option value="amostral">TOTAL</option>
                <option value="definir">definir</option>
              </select>
            </div>

            <form class="form-distribuicao">
              <p class="form-titulo">Modo de Distribuição</p>

              <div class="form-opcao">
                <input
                  type="radio"
                  id="media"
                  name="modo_distribuicao"
                  value="media"
                  class="form-radio"
                  checked
                />
                <label for="media" class="form-label-radio">Média</label><br />
              </div>

              <div class="form-opcao">
                <input
                  type="radio"
                  id="percentual"
                  name="modo_distribuicao"
                  value="percentual"
                  class="form-radio"
                />
                <label for="percentual" class="form-label-radio"
                  >Percentual</label
                ><br />
              </div>
            </form>
          </div>
          <!--Seção form informações-->

          <!--Botão Formulário-->
          <button id="generate-input" class="btn-secondary btn-hover-form">
            Incluir Dados
          </button>
          <!--Botão Formulário-->
        </div>
        <!--Seção Input-->
        <section class="container-section">
          <!--Seção Input Zonas-->
          <section class="input-container" id="input-container">
            <p>Abaixo informe os dados de acordo com os campos!</p>
            <!--Select ADA/FDI-->
            <div class="tooth-classification">
              <div class="form-group">
                <p class="form-label">Classificação dos Dentes</p>
                <select
                  class="form-input"
                  name="tooth-classification"
                  id="tooth-classification"
                >
                  <option value="fdi">FDI</option>
                  <option value="ada">ADA</option>
                </select>
              </div>
            </div>
            <!--Select ADA/FDI-->

            <div class="quadrant-form">
              <!--Quadrantes-->
              <div>
                <div class="quadrant-title">
                  <h4>Superiores</h4>
                </div>
                <div class="input-block input-block-top" id="input-block-top">
                  <div class="quadrant-rl">
                    <p>Direito</p>
                    <div
                      class="input-block-rl input-block-top-right"
                      id="input-block-top-right"
                    ></div>
                  </div>
                  <div class="quadrant-rl">
                    <p>Esquerdo</p>
                    <div
                      class="input-block-rl input-block-top-left"
                      id="input-block-top-left"
                    ></div>
                  </div>
                </div>
              </div>

              <div>
                <div class="quadrant-title">
                  <h4>Inferiores</h4>
                </div>
                <div
                  class="input-block input-block-bottom"
                  id="input-block-bottom"
                >
                  <div class="quadrant-rl">
                    <p>Direito</p>
                    <div
                      class="input-block-rl input-block-bottom-right"
                      id="input-block-bottom-right"
                    ></div>
                  </div>
                  <div class="quadrant-rl">
                    <p>Esquerdo</p>
                    <div
                      class="input-block-rl input-block-bottom-left"
                      id="input-block-bottom-left"
                    ></div>
                  </div>
                </div>
              </div>
              <!--Quadrantes-->
            </div>
            <div id="error-message" class="error-message">
              <p>
                Verifique os campos, todos os campos devem estar preenchidos!
              </p>
            </div>
            <hr />
            <!--Botão Histograma-->
            <div class="section-btn-histogram">
              <button
                id="generate-histogram"
                class="btn-secondary btn-hover-form"
              >
                Gerar Histograma
              </button>
            </div>
            <!--Botão Histograma-->

            <!--Seção do histogramas-->
            <div id="box-histogram-render" class="box-histogram-render">
              <div id="section-to-image" class="section-to-image">
                <div
                  id="section-histogram-render-superior"
                  class="section-histogram-render-superior"
                ></div>
                <p class="label-histogram-render">Número do dente no arco</p>
                <div
                  id="section-histogram-render-inferior"
                  class="section-histogram-render-inferior"
                ></div>

                <div class="histogram-legend">
                  <p>LEGENDA</p>
                  <div
                    id="histogram-legend-section"
                    class="histogram-legend-section"
                  >
                    <div
                      class="histogram-legend-box histogram-legend-box-total"
                    ></div>
                    <p class="histogram-legend-text">Total</p>
                  </div>

                  <div
                    id="histogram-legend-section-cpo"
                    class="histogram-legend-section-cpo"
                  >
                    <div class="histogram-legend-box-cpo">
                      <div
                        class="histogram-legend-box histogram-legend-box-c"
                      ></div>
                      <p class="histogram-legend-text">Cariados</p>
                    </div>

                    <div class="histogram-legend-box-cpo">
                      <div
                        class="histogram-legend-box histogram-legend-box-p"
                      ></div>
                      <p class="histogram-legend-text">Perdidos</p>
                    </div>

                    <div class="histogram-legend-box-cpo">
                      <div
                        class="histogram-legend-box histogram-legend-box-o"
                      ></div>
                      <p class="histogram-legend-text">Obturados</p>
                    </div>
                  </div>
                </div>
              </div>
              <div class="box-histogram-btn">
                <button
                  id="btn-save-image"
                  class="btn-secondary btn-hover-form"
                >
                  Download Imagem
                </button>
              </div>
            </div>
            <!--Seção do histogramas-->
          </section>
          <!--Seção Input Zonas-->
        </section>
        <!--Seção Input-->
      </section>
      <!--Seção Data-->
    </main>
    <!--MAIN-->
    <footer>&copy; 2024 Feito em Jequié, Bahia</footer>
    <script> /* Script */
      class TriData{constructor(){this.fieldC="$";this.fieldP="$";this.fieldO="$";this.labelFieldC="C";this.labelFieldP="P";this.labelFieldO="O"}} class Index{constructor(size){this.dataList=new Array(size);this.triDataList=[];for(let i=0;i<size;i++){this.triDataList.push(new TriData())}} getDataList(){return this.dataList} getIndexFdiList(){return this.indexFDI} getIndexAdaList(){return this.indexADA} setData(valor,index){this.dataList[index]=parseFloat(valor)}} class CPO_D extends Index{constructor(){super(32);this.indexFdiList=[18,17,16,15,14,13,12,11,21,22,23,24,25,26,27,28,38,37,36,35,34,33,32,31,41,42,43,44,45,46,47,48,];this.indexAdaList=[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,]}} class CEO_D extends Index{constructor(){super(20);this.indexFdiList=[55,54,53,52,51,61,62,63,64,65,75,74,73,72,71,81,82,83,84,85,];this.indexAdaList=["A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T",]}} function updateLabel(value,typeName){let labelsArray=getAllLabels();let teethIndex;if(typeName==="cpo"){teethIndex=new CPO_D()}else if(typeName==="ceo"){teethIndex=new CEO_D()} if(value==="fdi"){labelFDI(labelsArray,teethIndex)}else if(value==="ada"){labelADA(labelsArray,teethIndex)}} function labelFDI(labelsArray,teethIndex){for(let i=0;i<teethIndex.dataList.length;i++){labelsArray[i].textContent=teethIndex.indexFdiList[i]}} function labelADA(labelsArray,teethIndex){for(let i=0;i<teethIndex.dataList.length;i++){labelsArray[i].textContent=teethIndex.indexAdaList[i]}} function getAllLabels(){let labels=document.querySelectorAll(".label-name");return Array.from(labels)} const blockTopRight2=document.getElementById("input-block-top-right");const blockTopLeft2=document.getElementById("input-block-top-left");const blockBottomRight2=document.getElementById("input-block-bottom-right");const blockBottomLeft2=document.getElementById("input-block-bottom-left");function createInputsByIndexMultiple(typeName,radioEscolhido){blockTopRight2.innerHTML=" ";blockTopLeft2.innerHTML=" ";blockBottomRight2.innerHTML=" ";blockBottomLeft2.innerHTML=" ";let indexInstance;if(typeName==="cpo"){indexInstance=new CPO_D()}else if(typeName==="ceo"){indexInstance=new CEO_D()} createInputs(indexInstance,radioEscolhido)} function createInputs(indexInstance,radioEscolhido){const{dataList,triDataList}=indexInstance;for(let i=0;i<dataList.length;i++){const inputSection=document.createElement("div");inputSection.classList.add("input-mult");const inputTitle=document.createElement("div");inputTitle.classList.add("title-input-mult");inputTitle.classList.add("label-name");inputTitle.textContent=indexInstance.indexFdiList[i];inputSection.appendChild(inputTitle);const inputMultValues=document.createElement("div");inputMultValues.classList.add("mult-values");inputSection.appendChild(inputMultValues);createMultivaluedValues(inputMultValues,triDataList[i],radioEscolhido);if(i<dataList.length/2){var dataListNumber=dataList.length/2/2;if(i<dataListNumber){blockTopRight2.appendChild(inputSection)}else if((i)=>dataListNumber){blockTopLeft2.appendChild(inputSection)}}else{var dataListNumber=(dataList.length*75)/100;if(i<dataListNumber){blockBottomRight2.appendChild(inputSection)}else if((i)=>dataListNumber){blockBottomLeft2.appendChild(inputSection)}}}} function createMultivaluedValues(inputMultValues,triData,radioEscolhido){const labels=[triData.labelFieldC,triData.labelFieldP,triData.labelFieldO];const fields=[triData.fieldC,triData.fieldP,triData.fieldO];labels.forEach((labelText,index)=>{const valueDiv=document.createElement("div");valueDiv.classList.add("value");const labelElement=document.createElement("label");labelElement.textContent=labelText;valueDiv.appendChild(labelElement);const inputElement=document.createElement("input");inputElement.type="number";inputElement.value=fields[index];inputElement.min="0";inputElement.step="0.01";if(radioEscolhido==="media"){inputElement.max="1"}else{inputElement.max="100"} inputElement.classList.add("input-field");inputElement.addEventListener("input",function(){const val=parseFloat(this.value);if(radioEscolhido==="media"&&val>1){this.value=1}else if(radioEscolhido!=="media"&&val>100){this.value=100}});valueDiv.appendChild(inputElement);inputMultValues.appendChild(valueDiv)})} const blockTopRight=document.getElementById("input-block-top-right");const blockTopLeft=document.getElementById("input-block-top-left");const blockBottomRight=document.getElementById("input-block-bottom-right");const blockBottomLeft=document.getElementById("input-block-bottom-left");function createInputsByIndex(typeName,radioEscolhido){blockTopRight.innerHTML=" ";blockTopLeft.innerHTML=" ";blockBottomRight.innerHTML=" ";blockBottomLeft.innerHTML=" ";let dataList,indexFdiList;if(typeName==="cpo"){({dataList,indexFdiList}=new CPO_D())}else if(typeName==="ceo"){({dataList,indexFdiList}=new CEO_D())} createInputs2(dataList,indexFdiList,radioEscolhido)} function createInputs2(dataList,indexFdiList,radioEscolhido){for(let i=0;i<dataList.length;i++){const inputSection=document.createElement("div");inputSection.classList.add("input-section");const label=document.createElement("label");label.classList.add("label-name");label.textContent=indexFdiList[i];inputSection.appendChild(label);const input=document.createElement("input");input.type="number";input.min="0";input.step="0.01";if(radioEscolhido==="media"){input.max="1"}else{input.max="100"} input.classList.add("input-field");input.addEventListener("input",function(){const val=parseFloat(this.value);if(radioEscolhido==="media"&&val>1){this.value=1}else if(radioEscolhido!=="media"&&val>100){this.value=100}});inputSection.appendChild(input);if(i<dataList.length/2){var dataListNumber=dataList.length/2/2;if(i<dataListNumber){blockTopRight.appendChild(inputSection)}else if((i)=>dataListNumber){blockTopLeft.appendChild(inputSection)}}else{var dataListNumber=(dataList.length*75)/100;if(i<dataListNumber){blockBottomRight.appendChild(inputSection)}else if((i)=>dataListNumber){blockBottomLeft.appendChild(inputSection)}}}} const cpo_d=new CPO_D();const ceo_d=new CEO_D();const cpoBtn=document.getElementById("permanent-teeth");const ceoBtn=document.getElementById("deciduous-teeth");const toothSection=document.getElementById("data-section");const titleSection=document.getElementById("section-title");const generateInputBtn=document.getElementById("generate-input");const selectElement=document.getElementById("index-entry");const boxInputSection=document.getElementById("input-container");const errorMessage=document.getElementById("error-message");const btnGenerateHistogram=document.getElementById("generate-histogram");var typeName=null;var isButtonClicked=!1;let radioEscolhido=null;const histogramSection=document.getElementById("box-histogram-render");let modoEscolhido=null;const radios=document.querySelectorAll('input[name="modo_distribuicao"]');const selecionadoInicial=document.querySelector('input[name="modo_distribuicao"]:checked');if(selecionadoInicial){radioEscolhido=selecionadoInicial.value;console.log("Valor inicial:",radioEscolhido)} radios.forEach((radio)=>{radio.addEventListener("change",()=>{if(radio.checked){radioEscolhido=radio.value;console.log("Usuário escolheu:",radioEscolhido)}})});function manipulateSelectOptions(optionText,optionValue){selectElement.innerHTML="";const newOption=new Option(optionText,optionValue);const defaultOption=new Option("TOTAL","total");selectElement.add(defaultOption);selectElement.add(newOption)} function updateSection(title,sectionValue,optionText,optionValue){boxInputSection.style.display="none";titleSection.innerHTML=title;manipulateSelectOptions(optionText,optionValue);toothSection.style.display="block";typeName=sectionValue} cpoBtn.addEventListener("click",()=>updateSection("Dentes Permanentes","cpo","TOTAL POR COMPENENTES (CPO)","cpo"));ceoBtn.addEventListener("click",()=>updateSection("Dentes Decíduos","ceo","TOTAL POR COMPENENTES (ceo)","ceo"));generateInputBtn.addEventListener("click",()=>{const optionValue=selectElement.value;boxInputSection.style.display="block";histogramSection.style.display="none";console.log(radioEscolhido);if(optionValue==="total"){console.log(typeName);createInputsByIndex(typeName,radioEscolhido)}else{console.log(typeName);createInputsByIndexMultiple(typeName,radioEscolhido)} if(isButtonClicked){const toothClassificationElement=document.getElementById("tooth-classification");toothClassificationElement.value="fdi"} isButtonClicked=!0});const selectElementTooth=document.getElementById("tooth-classification");selectElementTooth.addEventListener("change",(event)=>{const value=event.target.value;console.log(value);updateLabel(value,typeName);histogramSection.style.display="none"});function saveInputValues(){const allInputs=document.querySelectorAll(".input-field");const indexObject=typeName==="cpo"?cpo_d:ceo_d;const isTriData=!!indexObject.triDataList;if(selectElement.value!="total"){for(let i=0;i<allInputs.length;i+=3){const idx=i/3;const triData=indexObject.triDataList[idx];triData.fieldC=parseFloat(allInputs[i].value)||0;triData.fieldP=parseFloat(allInputs[i+1].value)||0;triData.fieldO=parseFloat(allInputs[i+2].value)||0;indexObject.setData(triData.fieldA+triData.fieldB+triData.fieldC,idx)}}else{allInputs.forEach((input,idx)=>{const valor=input.value;if(valor!==""){indexObject.setData(valor,idx)}})}} function validateField(){const allInputs=document.querySelectorAll(".input-field");let allFilled=!0;allInputs.forEach((input)=>{if(input.value===""){allFilled=!1}});return allFilled} btnGenerateHistogram.addEventListener("click",()=>{const optionValue=selectElement.value;if(optionValue==="total"){histogramTotal()}else{histogramMulti()}});function histogramTotal(){const isValidated=validateField();const value=selectElementTooth.value;let dadosDentes,labelDentes,espaco_superior,espaco_inferior;espaco_superior=document.getElementById("section-histogram-render-superior");espaco_inferior=document.getElementById("section-histogram-render-inferior");if(isValidated){histogramSection.style.display="flex";espaco_superior.style.width="100%";espaco_superior.style.maxWidth="500px";espaco_superior.style.minWidth="300px";espaco_superior.style.height="500px";espaco_superior.textContent=" ";espaco_inferior.style.width="100%";espaco_inferior.style.maxWidth="500px";espaco_inferior.style.minWidth="300px";espaco_inferior.style.height="500px";espaco_inferior.textContent=" ";console.log("Campos preenchidos");errorMessage.style.display="none";saveInputValues();if(typeName=="cpo"){dadosDentes=cpo_d.dataList;if(value==="fdi"){labelDentes=cpo_d.indexFdiList}else if(value==="ada"){labelDentes=cpo_d.indexAdaList}}else{dadosDentes=ceo_d.dataList;if(value==="fdi"){labelDentes=ceo_d.indexFdiList}else if(value==="ada"){labelDentes=ceo_d.indexAdaList}} let meio=Math.ceil(dadosDentes.length/2);const dadosDentesSuperior=dadosDentes.slice(0,meio);const dadosDentesInferior=dadosDentes.slice(meio);meio=Math.ceil(labelDentes.length/2);const labelDentesSuperior=labelDentes.slice(0,meio);const labelDentesInferior=labelDentes.slice(meio);let distribuicao=radioEscolhido;let histogram_superior=new HistogramTotal(espaco_superior,dadosDentesSuperior,labelDentesSuperior,"top",distribuicao);console.log(dadosDentes);histogram_superior.generateHistogramTotal();let histogram_inferior=new HistogramTotal(espaco_inferior,dadosDentesInferior,labelDentesInferior,"bottom",distribuicao);console.log(dadosDentes);histogram_inferior.generateHistogramTotal();document.getElementById("histogram-legend-section").style.display="flex";document.getElementById("histogram-legend-section-cpo").style.display="none"}else{console.log("Não estão preenchidos");errorMessage.style.display="block"}} function histogramMulti(){const isValidated=validateField();const value=selectElementTooth.value;let dadosDentes=[],labelDentes,espaco_superior,espaco_inferior;espaco_superior=document.getElementById("section-histogram-render-superior");espaco_inferior=document.getElementById("section-histogram-render-inferior");if(isValidated){histogramSection.style.display="flex";espaco_superior.style.width="100%";espaco_superior.style.maxWidth="500px";espaco_superior.style.minWidth="300px";espaco_superior.style.height="500px";espaco_superior.textContent=" ";espaco_inferior.style.width="100%";espaco_inferior.style.maxWidth="500px";espaco_inferior.style.minWidth="300px";espaco_inferior.style.height="500px";espaco_inferior.textContent=" ";console.log("Campos preenchidos");errorMessage.style.display="none";saveInputValues();if(typeName=="cpo"){dadosDentes=cpo_d.triDataList;if(value==="fdi"){labelDentes=cpo_d.indexFdiList}else if(value==="ada"){labelDentes=cpo_d.indexAdaList}}else{dadosDentes=ceo_d.triDataList;if(value==="fdi"){labelDentes=ceo_d.indexFdiList}else if(value==="ada"){labelDentes=ceo_d.indexAdaList}} let meio=Math.ceil(dadosDentes.length/2);const dadosDentesSuperior=dadosDentes.slice(0,meio);const dadosDentesInferior=dadosDentes.slice(meio);meio=Math.ceil(labelDentes.length/2);const labelDentesSuperior=labelDentes.slice(0,meio);const labelDentesInferior=labelDentes.slice(meio);let distribuicao=radioEscolhido;let histogram_superior=new HistogramMulti(espaco_superior,dadosDentesSuperior,labelDentesSuperior,"top",distribuicao);console.log(dadosDentes);histogram_superior.generateHistogramMulti();let histogram_inferior=new HistogramMulti(espaco_inferior,dadosDentesInferior,labelDentesInferior,"bottom",distribuicao);console.log(dadosDentes);histogram_inferior.generateHistogramMulti();document.getElementById("histogram-legend-section-cpo").style.display="flex";document.getElementById("histogram-legend-section").style.display="none"}else{console.log("Não estão preenchidos");errorMessage.style.display="block"}}
    </script>
    <script>/* Script scriptMulti*/
      class HistogramMulti{constructor(parent,dataSerie,dataLabel,position,distribuicao){this._dataSerie=dataSerie;this._dataLabel=dataLabel;this.position=position;this._distribuicao=distribuicao;this._container=document.createElement("div");this._container.classList.add("container");parent.appendChild(this._container)} generateHistogramMulti(){this._container.innerHTML="";let maxDataSerieValue=this.findMax();const areaX=document.createElement("div");const areaY=document.createElement("div");const areaA=document.createElement("div");const areaB=document.createElement("div");const areaC=document.createElement("div");const areaD=document.createElement("div");areaX.classList.add("area-x");this._container.appendChild(areaX);areaY.classList.add("area-y");this._container.appendChild(areaY);areaA.classList.add("area-a");this._container.appendChild(areaA);areaB.classList.add("area-b");this._container.appendChild(areaB);areaC.classList.add("area-c");this._container.appendChild(areaC);areaD.classList.add("area-d");this._container.appendChild(areaD);const sideBar=document.createElement("div");sideBar.classList.add("side-bar");const ruleText=document.createElement("div");ruleText.classList.add("rule-text");const text=document.createElement("p");text.innerHTML=this._distribuicao==="media"?"Média":"Percentual";ruleText.appendChild(text);sideBar.appendChild(ruleText);const ruleBar=document.createElement("div");ruleBar.classList.add("rule-bar");const step=maxDataSerieValue/4;const ruleValues=[maxDataSerieValue,step*3,step*2,step,0].map((value)=>parseFloat(value.toFixed(2)));for(let i=0;i<ruleValues.length;i++){const ruleBarItem=document.createElement("span");ruleBarItem.classList.add("rule-bar-item");ruleBarItem.textContent=`${ruleValues[i]}-`;ruleBar.appendChild(ruleBarItem)} sideBar.appendChild(ruleBar);areaA.appendChild(sideBar);const content=document.createElement("div");content.classList.add("data-content");content.style.gridTemplateColumns=`repeat(${this._dataLabel.length}, auto)`;for(let i=0;i<this._dataLabel.length;i++){const item=this._dataSerie[i];const bar=document.createElement("div");bar.classList.add("bar");const valueBar=document.createElement("div");valueBar.classList.add("value-bar-multi");const valueC=document.createElement("div");valueC.classList.add("valueC");valueC.style.height=`${(item.fieldC / maxDataSerieValue) * 100}%`;const valueP=document.createElement("div");valueP.classList.add("valueP");valueP.style.height=`${(item.fieldP / maxDataSerieValue) * 100}%`;const valueO=document.createElement("div");valueO.classList.add("valueO");valueO.style.height=`${(item.fieldO / maxDataSerieValue) * 100}%`;const soma=item.fieldC+item.fieldP+item.fieldO;valueBar.style.height=`${(soma / maxDataSerieValue) * 100}%`;valueBar.appendChild(valueO);valueBar.appendChild(valueP);valueBar.appendChild(valueC);bar.appendChild(valueBar);content.appendChild(bar)} areaB.appendChild(content);const contentLabel=document.createElement("div");contentLabel.classList.add("label-content");contentLabel.style.gridTemplateColumns=`repeat(${this._dataLabel.length}, 1fr)`;for(let i=0;i<this._dataLabel.length;i++){const barLabel=document.createElement("span");barLabel.classList.add("bar-label");barLabel.textContent=`${this._dataLabel[i]}`;contentLabel.appendChild(barLabel)} areaD.appendChild(contentLabel);for(let i=0;i<this._dataLabel.length;i++){const item=this._dataSerie[i];const captionBar=document.createElement("div");captionBar.classList.add("caption-bar");const legendaC=document.createElement("span");legendaC.classList.add("legendaC");legendaC.innerHTML=`${item.fieldC.toFixed(2)}`;const legendaP=document.createElement("span");legendaP.classList.add("legendaP");legendaP.innerHTML=`${item.fieldP.toFixed(2)}`;const legendaO=document.createElement("span");legendaO.classList.add("legendaO");legendaO.innerHTML=`${item.fieldO.toFixed(2)}`;captionBar.appendChild(legendaO);captionBar.appendChild(legendaP);captionBar.appendChild(legendaC);areaY.style.gridTemplateColumns=`repeat(${this._dataLabel.length}, auto)`;areaY.appendChild(captionBar)} this.position==="bottom"?(this._container.classList.add("inverted-container"),ruleBar.classList.add("inverted-rule-bar")):null} findMax(){let max=0;for(let i=0;i<this._dataSerie.length;i++){const item=this._dataSerie[i];const soma=item.fieldC+item.fieldP+item.fieldO;if(soma>max){max=soma}} return max}}
    </script>
    <script>/* Script scriptTotal*/
      class HistogramTotal{constructor(parent,dataSerie,dataLabel,position,distribuicao){this._dataSerie=dataSerie;this._dataLabel=dataLabel;this.position=position;this._distribuicao=distribuicao;this._container=document.createElement("div");this._container.classList.add("container");parent.appendChild(this._container)} generateHistogramTotal(){this._container.innerHTML="";let maxDataSerieValue=this.findMax(this._dataSerie);const areaX=document.createElement("div");const areaY=document.createElement("div");const areaA=document.createElement("div");const areaB=document.createElement("div");const areaC=document.createElement("div");const areaD=document.createElement("div");areaX.classList.add("area-x");this._container.appendChild(areaX);areaY.classList.add("area-y");this._container.appendChild(areaY);areaA.classList.add("area-a");this._container.appendChild(areaA);areaB.classList.add("area-b");this._container.appendChild(areaB);areaC.classList.add("area-c");this._container.appendChild(areaC);areaD.classList.add("area-d");this._container.appendChild(areaD);const sideBar=document.createElement("div");sideBar.classList.add("side-bar");const ruleText=document.createElement("div");ruleText.classList.add("rule-text");const text=document.createElement("p");text.innerHTML=this._distribuicao==="media"?"Média":"Percentual";ruleText.appendChild(text);sideBar.appendChild(ruleText);const ruleBar=document.createElement("div");ruleBar.classList.add("rule-bar");const step=maxDataSerieValue/4;const ruleValues=[maxDataSerieValue,step*3,step*2,step,0].map((value)=>parseFloat(value.toFixed(2)));for(let i=0;i<ruleValues.length;i++){const ruleBarItem=document.createElement("span");ruleBarItem.classList.add("rule-bar-item");ruleBarItem.textContent=`${ruleValues[i]}-`;ruleBar.appendChild(ruleBarItem)} sideBar.appendChild(ruleBar);areaA.appendChild(sideBar);const content=document.createElement("div");content.classList.add("data-content");content.style.gridTemplateColumns=`repeat(${this._dataLabel.length}, auto)`;for(let i=0;i<this._dataLabel.length;i++){const bar=document.createElement("div");bar.classList.add("bar");const valueBar=document.createElement("span");valueBar.classList.add("value-bar");valueBar.style.height=`${ (this._dataSerie[i] / maxDataSerieValue) * 100 }%`;bar.appendChild(valueBar);content.appendChild(bar)} areaB.appendChild(content);const contentLabel=document.createElement("div");contentLabel.classList.add("label-content");contentLabel.style.gridTemplateColumns=`repeat(${this._dataLabel.length}, 1fr)`;for(let i=0;i<this._dataLabel.length;i++){const barLabel=document.createElement("span");barLabel.classList.add("bar-label");barLabel.textContent=`${this._dataLabel[i]}`;contentLabel.appendChild(barLabel)} areaD.appendChild(contentLabel);for(let i=0;i<this._dataLabel.length;i++){const captionBar=document.createElement("div");captionBar.classList.add("caption-bar");const legendaC=document.createElement("span");legendaC.classList.add("legendaTotal");legendaC.innerHTML=`${this._dataSerie[i].toFixed(2)}`;captionBar.appendChild(legendaC);areaY.style.gridTemplateColumns=`repeat(${this._dataLabel.length}, auto)`;areaY.appendChild(captionBar)} this.position==="bottom"?(this._container.classList.add("inverted-container"),ruleBar.classList.add("inverted-rule-bar")):null} findMax(){let max=parseFloat(this._dataSerie[0]);for(let i=1;i<this._dataSerie.length;i++){if(parseFloat(this._dataSerie[i])>max){max=parseFloat(this._dataSerie[i])}} return max}}
    </script>
    <script>/* Script canvas */
      const btnSalvarImagem=document.getElementById("btn-save-image");btnSalvarImagem.addEventListener("click",()=>{const section=document.getElementById("section-to-image");html2canvas(section).then((canvas)=>{const imagem=canvas.toDataURL("image/png");const link=document.createElement("a");link.href=imagem;link.download="histograma.png";link.click()})})
    </script>
</body>
</html>
